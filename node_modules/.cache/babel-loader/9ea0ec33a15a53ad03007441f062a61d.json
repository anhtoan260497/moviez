{"ast":null,"code":"import _toConsumableArray from\"/Users/rengarrrrr/Desktop/Studies/movie/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _asyncToGenerator from\"/Users/rengarrrrr/Desktop/Studies/movie/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/rengarrrrr/Desktop/Studies/movie/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/Users/rengarrrrr/Desktop/Studies/movie/node_modules/@babel/runtime/regenerator/index.js\";import React from\"react\";import{useLocation}from\"react-router-dom\";import{useEffect}from\"react\";import movieAPI from\"../../api/movieAPI\";import tvAPI from\"../../api/tvAPI\";import{useState}from\"react\";import TypeContent from\"./components/TypeContent\";import TypeFilter from\"./components/TypeFilter\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function TypeFilm(props){var API_Key=process.env.REACT_APP_MOVIE_API;var location=useLocation();var typeFilm=location===null||location===void 0?void 0:location.pathname.slice(1,3);var _useState=useState(1),_useState2=_slicedToArray(_useState,2),currentPage=_useState2[0],setCurrentPage=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),data=_useState4[0],setData=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),sortData=_useState6[0],setSortData=_useState6[1];var type=typeFilm===\"tv\"?location.pathname.slice(4):location.pathname.slice(7);var _useState7=useState(\"ratingDescending\"),_useState8=_slicedToArray(_useState7,2),sortType=_useState8[0],setSortType=_useState8[1];var handleSortType=function handleSortType(values){setSortType(values);};//set sortType\nuseEffect(function(){if(!typeFilm||!type)return;var fetchFilmData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _data,_data2,_data3,_data4,_data5,_data6,_data7,_data8;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.t0=typeFilm;_context.next=_context.t0===\"mo\"?3:_context.t0===\"tv\"?28:53;break;case 3:_context.t1=type;_context.next=_context.t1===\"popular\"?6:_context.t1===\"nowplaying\"?11:_context.t1===\"upcoming\"?16:_context.t1===\"toprated\"?21:26;break;case 6:_context.next=8;return movieAPI.getMoviePopular(API_Key,currentPage);case 8:_data=_context.sent;setData(_data.data.results);return _context.abrupt(\"break\",27);case 11:_context.next=13;return movieAPI.getMovieNowPlaying(API_Key,currentPage);case 13:_data2=_context.sent;setData(_data2.data.results);return _context.abrupt(\"break\",27);case 16:_context.next=18;return movieAPI.getMovieUpcoming(API_Key,currentPage);case 18:_data3=_context.sent;setData(_data3.data.results);return _context.abrupt(\"break\",27);case 21:_context.next=23;return movieAPI.getMovieToprated(API_Key,currentPage);case 23:_data4=_context.sent;setData(_data4.data.results);return _context.abrupt(\"break\",27);case 26:return _context.abrupt(\"return\",null);case 27:return _context.abrupt(\"break\",54);case 28:_context.t2=type;_context.next=_context.t2===\"popular\"?31:_context.t2===\"airing\"?36:_context.t2===\"ontv\"?41:_context.t2===\"toprated\"?46:51;break;case 31:_context.next=33;return tvAPI.getTvPopular(API_Key,currentPage);case 33:_data5=_context.sent;setData(_data5.data.results);return _context.abrupt(\"break\",52);case 36:_context.next=38;return tvAPI.getTvAiring(API_Key,currentPage);case 38:_data6=_context.sent;setData(_data6.data.results);return _context.abrupt(\"break\",52);case 41:_context.next=43;return tvAPI.getTvOnTv(API_Key,currentPage);case 43:_data7=_context.sent;setData(_data7.data.results);return _context.abrupt(\"break\",52);case 46:_context.next=48;return tvAPI.getTvTopRated(API_Key,currentPage);case 48:_data8=_context.sent;setData(_data8.data.results);return _context.abrupt(\"break\",52);case 51:return _context.abrupt(\"return\",null);case 52:return _context.abrupt(\"break\",54);case 53:return _context.abrupt(\"return\",null);case 54:case\"end\":return _context.stop();}}},_callee);}));return function fetchFilmData(){return _ref.apply(this,arguments);};}();fetchFilmData();},[typeFilm,type,API_Key,currentPage]);useEffect(function(){if(!sortType||!data)return;switch(sortType){case\"popularDescending\":{var newData=_toConsumableArray(data);newData.sort(function(a,b){return b.popularity-a.popularity;});setSortData(newData);}break;case\"popularAscending\":{var _newData=_toConsumableArray(data);_newData.sort(function(a,b){return a.popularity-b.popularity;});setSortData(_newData);}break;case\"ratingDescending\":{var _newData2=_toConsumableArray(data);_newData2.sort(function(a,b){return b.vote_average-a.vote_average;});setSortData(_newData2);}break;case\"ratingAscending\":{var _newData3=_toConsumableArray(data);_newData3.sort(function(a,b){return a.vote_average-b.vote_average;});setSortData(_newData3);}break;case\"titleDescending\":{var _newData4=_toConsumableArray(data);_newData4.sort(function(a,b){return b.title-a.title;});setSortData(_newData4);}break;case\"titleAscending\":{var _newData5=_toConsumableArray(data);_newData5.sort(function(a,b){return a.title.charCodeAt(0)-b.title.charCodeAt(0);});setSortData(_newData5);}break;default:return null;}},[sortType,data]);return/*#__PURE__*/_jsxs(\"section\",{className:\"type-film\",style:{position:\"relative\",top:\"4rem\",width:\"100%\",padding:\"2% 5%\"},children:[/*#__PURE__*/_jsx(\"h1\",{style:{fontSize:\"2rem\",margin:\"0\"},children:type}),/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",gap:\"1rem\"},children:[/*#__PURE__*/_jsx(TypeFilter,{handleSortType:handleSortType}),/*#__PURE__*/_jsx(TypeContent,{data:sortData,type:typeFilm===\"tv\"?\"tv\":\"movie\"})]})]});}export default TypeFilm;","map":{"version":3,"sources":["/Users/rengarrrrr/Desktop/Studies/movie/src/features/TypeFilm/index.jsx"],"names":["React","useLocation","useEffect","movieAPI","tvAPI","useState","TypeContent","TypeFilter","TypeFilm","props","API_Key","process","env","REACT_APP_MOVIE_API","location","typeFilm","pathname","slice","currentPage","setCurrentPage","data","setData","sortData","setSortData","type","sortType","setSortType","handleSortType","values","fetchFilmData","getMoviePopular","results","getMovieNowPlaying","getMovieUpcoming","getMovieToprated","getTvPopular","getTvAiring","getTvOnTv","getTvTopRated","newData","sort","a","b","popularity","vote_average","title","charCodeAt","position","top","width","padding","fontSize","margin","display","gap"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { useLocation } from \"react-router-dom\";\nimport { useEffect } from \"react\";\nimport movieAPI from \"../../api/movieAPI\";\nimport tvAPI from \"../../api/tvAPI\";\nimport { useState } from \"react\";\nimport TypeContent from \"./components/TypeContent\";\nimport TypeFilter from \"./components/TypeFilter\";\n\nTypeFilm.propTypes = {};\n\nfunction TypeFilm(props) {\n  const API_Key = process.env.REACT_APP_MOVIE_API;\n\n  const location = useLocation();\n\n  const typeFilm = location?.pathname.slice(1, 3);\n\n  const [currentPage, setCurrentPage] = useState(1);\n\n  const [data, setData] = useState();\n\n  const [sortData, setSortData] = useState();\n\n  const type =\n    typeFilm === \"tv\" ? location.pathname.slice(4) : location.pathname.slice(7);\n\n  const [sortType, setSortType] = useState(\"ratingDescending\");\n\n  const handleSortType = (values) => {\n    setSortType(values);\n  }; //set sortType\n\n  useEffect(() => {\n    if (!typeFilm || !type) return;\n    const fetchFilmData = async () => {\n      switch (typeFilm) {\n        case \"mo\":\n          switch (type) {\n            case \"popular\": {\n              const data = await movieAPI.getMoviePopular(API_Key, currentPage);\n              setData(data.data.results);\n              break;\n            }\n            case \"nowplaying\": {\n              const data = await movieAPI.getMovieNowPlaying(\n                API_Key,\n                currentPage\n              );\n              setData(data.data.results);\n              break;\n            }\n            case \"upcoming\": {\n              const data = await movieAPI.getMovieUpcoming(\n                API_Key,\n                currentPage\n              );\n              setData(data.data.results);\n              break;\n            }\n            case \"toprated\": {\n              const data = await movieAPI.getMovieToprated(\n                API_Key,\n                currentPage\n              );\n              setData(data.data.results);\n              break;\n            }\n            default:\n              return null;\n          }\n          break;\n        case \"tv\":\n          switch (type) {\n            case \"popular\": {\n              const data = await tvAPI.getTvPopular(API_Key, currentPage);\n              setData(data.data.results);\n              break;\n            }\n            case \"airing\": {\n              const data = await tvAPI.getTvAiring(API_Key, currentPage);\n              setData(data.data.results);\n              break;\n            }\n            case \"ontv\": {\n              const data = await tvAPI.getTvOnTv(API_Key, currentPage);\n              setData(data.data.results);\n              break;\n            }\n            case \"toprated\": {\n              const data = await tvAPI.getTvTopRated(API_Key, currentPage);\n              setData(data.data.results);\n              break;\n            }\n            default:\n              return null;\n          }\n          break;\n        default:\n          return null;\n      }\n    };\n    fetchFilmData();\n  }, [typeFilm, type, API_Key, currentPage]);\n\n  useEffect(() => {\n    if (!sortType || !data) return;\n    switch (sortType) {\n      case \"popularDescending\":\n        {\n          const newData = [...data];\n          newData.sort((a, b) => b.popularity - a.popularity);\n          setSortData(newData);\n        }\n        break;\n      case \"popularAscending\":\n        {\n          const newData = [...data];\n          newData.sort((a, b) => a.popularity - b.popularity);\n          setSortData(newData);\n        }\n        break;\n      case \"ratingDescending\":\n        {\n          const newData = [...data];\n          newData.sort((a, b) => b.vote_average - a.vote_average);\n          setSortData(newData);\n        }\n        break;\n      case \"ratingAscending\":\n        {\n          const newData = [...data];\n          newData.sort((a, b) => a.vote_average - b.vote_average);\n          setSortData(newData);\n        }\n        break;\n      case \"titleDescending\":\n        {\n          const newData = [...data];\n          newData.sort((a, b) => b.title - a.title);\n          setSortData(newData);\n        }\n        break;\n      case \"titleAscending\":\n        {\n          const newData = [...data];\n          newData.sort((a, b) => a.title.charCodeAt(0) - b.title.charCodeAt(0));\n          setSortData(newData);\n        }\n        break;\n      default:\n        return null;\n    }\n  }, [sortType, data]);\n\n  return (\n    <section\n      className=\"type-film\"\n      style={{\n        position: \"relative\",\n        top: \"4rem\",\n        width: \"100%\",\n        padding: \"2% 5%\",\n      }}\n    >\n      <h1 style={{ fontSize: \"2rem\", margin: \"0\" }}>{type}</h1>\n      <div style={{ display: \"flex\", gap: \"1rem\" }}>\n        <TypeFilter handleSortType={handleSortType} />\n        <TypeContent\n          data={sortData}\n          type={typeFilm === \"tv\" ? \"tv\" : \"movie\"}\n        />\n      </div>\n    </section>\n  );\n}\n\nexport default TypeFilm;\n"]},"metadata":{},"sourceType":"module"}