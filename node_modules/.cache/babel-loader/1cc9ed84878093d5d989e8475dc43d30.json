{"ast":null,"code":"import _asyncToGenerator from\"/Users/rengarrrrr/Desktop/Studies/movie/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/rengarrrrr/Desktop/Studies/movie/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/Users/rengarrrrr/Desktop/Studies/movie/node_modules/@babel/runtime/regenerator/index.js\";import React,{useEffect}from\"react\";import\"./styles.scss\";import SlideButton from\"../../../../components/SlideButton\";import{useState}from\"react\";import TrailerTag from\"../../../../components/TrailerTag\";import movieAPI from\"../../../../api/movieAPI\";import tvAPI from\"../../../../api/tvAPI\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function TrailerHome(props){var _useState=useState(\"option1\"),_useState2=_slicedToArray(_useState,2),trailerType=_useState2[0],setTrailerType=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),trailerData=_useState4[0],setTrailerData=_useState4[1];var _useState5=useState(true),_useState6=_slicedToArray(_useState5,2),isLoading=_useState6[0],setIsLoading=_useState6[1];var API_Key=process.env.REACT_APP_MOVIE_API;var handleTrailer=function handleTrailer(e){var type=e.target.attributes.value.value;if(type!==trailerType)setTrailerType(type);setTrailerData();// id của trailerData k đổi kịp theo trailerType nên phải gán lại TrailerData bằng rỗng \n// trước khi chạy useEffect để gán lại id cho từng cái TrailerTag ở dòng 49 và 27\n};var renderTrailerData=function renderTrailerData(){if(!trailerData)return;return trailerData.map(function(item,idx){var name=\"\";if(trailerType===\"option1\")name=item===null||item===void 0?void 0:item.name;if(trailerType===\"option2\")name=item===null||item===void 0?void 0:item.original_title;return/*#__PURE__*/_jsx(TrailerTag,{name:name,img:item===null||item===void 0?void 0:item.backdrop_path,id:item===null||item===void 0?void 0:item.id,trailerType:trailerType},idx);});};useEffect(function(){if(!trailerType)return;var fetchPopularData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var data,setData,i,_data,_setData,_i;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setIsLoading(true);if(!(trailerType===\"option2\")){_context.next=9;break;}_context.next=4;return movieAPI.getPopularHome(API_Key);case 4:data=_context.sent;setData=[];for(i=0;i<10;i++){setData.push(data.data.results[i]);}setTrailerData(setData);setIsLoading(false);case 9:if(!(trailerType===\"option1\")){_context.next=17;break;}_context.next=12;return tvAPI.getPopularHome(API_Key);case 12:_data=_context.sent;_setData=[];for(_i=0;_i<10;_i++){_setData.push(_data.data.results[_i]);}setTrailerData(_setData);setIsLoading(false);case 17:case\"end\":return _context.stop();}}},_callee);}));return function fetchPopularData(){return _ref.apply(this,arguments);};}();fetchPopularData();},[API_Key,trailerType]);return/*#__PURE__*/_jsxs(\"section\",{className:\"trailer-home\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"trailer-title\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Lastest Trailer\"}),/*#__PURE__*/_jsx(SlideButton,{option1:\"On TV\",option2:\"Theaters\",handleOption:handleTrailer,optionType:trailerType})]}),!isLoading?/*#__PURE__*/_jsx(\"div\",{\"data-aos\":\"zoom-in\",className:\"trailer-content\",children:renderTrailerData()}):null]});}export default TrailerHome;","map":{"version":3,"sources":["/Users/rengarrrrr/Desktop/Studies/movie/src/features/Home/components/TrailerHome/index.jsx"],"names":["React","useEffect","SlideButton","useState","TrailerTag","movieAPI","tvAPI","TrailerHome","props","trailerType","setTrailerType","trailerData","setTrailerData","isLoading","setIsLoading","API_Key","process","env","REACT_APP_MOVIE_API","handleTrailer","e","type","target","attributes","value","renderTrailerData","map","item","idx","name","original_title","backdrop_path","id","fetchPopularData","getPopularHome","data","setData","i","push","results"],"mappings":"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","sourcesContent":["import React, { useEffect } from \"react\";\nimport PropTypes from \"prop-types\";\nimport \"./styles.scss\";\nimport SlideButton from \"../../../../components/SlideButton\";\nimport { useState } from \"react\";\nimport TrailerTag from \"../../../../components/TrailerTag\";\nimport movieAPI from \"../../../../api/movieAPI\";\nimport tvAPI from \"../../../../api/tvAPI\";\n\nTrailerHome.propTypes = {};\n\nfunction TrailerHome(props) {\n  const [trailerType, setTrailerType] = useState(\"option1\");\n  const [trailerData, setTrailerData] = useState();\n  const [isLoading, setIsLoading] = useState(true);\n\n  const API_Key = process.env.REACT_APP_MOVIE_API;\n\n  const handleTrailer = (e) => {\n    const type = e.target.attributes.value.value;\n    if (type !== trailerType) setTrailerType(type);\n    setTrailerData(); \n    // id của trailerData k đổi kịp theo trailerType nên phải gán lại TrailerData bằng rỗng \n    // trước khi chạy useEffect để gán lại id cho từng cái TrailerTag ở dòng 49 và 27\n  };\n\n  const renderTrailerData = () => {\n    if (!trailerData) return;\n\n    return trailerData.map((item, idx) => {\n      let name = \"\";\n      if (trailerType === \"option1\") name = item?.name;\n      if (trailerType === \"option2\") name = item?.original_title;\n      return (\n        <TrailerTag\n          key={idx}\n          name={name}\n          img={item?.backdrop_path}\n          id={item?.id}\n          trailerType={trailerType}\n        />\n      );\n    });\n  };\n\n  useEffect(() => {\n    if (!trailerType) return;\n\n    const fetchPopularData = async () => {\n      setIsLoading(true);\n      if (trailerType === \"option2\") {\n        const data = await movieAPI.getPopularHome(API_Key);\n        const setData = [];\n        for (let i = 0; i < 10; i++) {\n          setData.push(data.data.results[i]);\n        }\n        setTrailerData(setData);\n        setIsLoading(false);\n      }\n      if (trailerType === \"option1\") {\n        const data = await tvAPI.getPopularHome(API_Key);\n        const setData = [];\n        for (let i = 0; i < 10; i++) {\n          setData.push(data.data.results[i]);\n        }\n        setTrailerData(setData);\n        setIsLoading(false);\n      }\n    };\n    fetchPopularData();\n  }, [API_Key, trailerType]);\n\n  return (\n    <section className=\"trailer-home\">\n      <div className=\"trailer-title\">\n        <h2>Lastest Trailer</h2>\n        <SlideButton\n          option1=\"On TV\"\n          option2=\"Theaters\"\n          handleOption={handleTrailer}\n          optionType={trailerType}\n        />\n      </div>\n      {!isLoading ? (\n        <div data-aos=\"zoom-in\" className=\"trailer-content\">\n          {renderTrailerData()}\n        </div>\n      ) : null}\n    </section>\n  );\n}\n\nexport default TrailerHome;\n"]},"metadata":{},"sourceType":"module"}