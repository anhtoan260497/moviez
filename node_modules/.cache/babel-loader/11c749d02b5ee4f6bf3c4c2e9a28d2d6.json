{"ast":null,"code":"import _asyncToGenerator from\"/Users/rengarrrrr/Desktop/Studies/movie/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/rengarrrrr/Desktop/Studies/movie/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/Users/rengarrrrr/Desktop/Studies/movie/node_modules/@babel/runtime/regenerator/index.js\";import React,{useEffect}from\"react\";import\"./styles.scss\";import FilmCast from\"../FilmCast\";import FilmFact from\"../FilmFact\";import{useLocation}from\"react-router-dom\";import{useState}from\"react\";import tvAPI from\"../../../../api/tvAPI\";import movieAPI from\"../../../../api/movieAPI\";import FilmRecommend from\"../FilmRecommend\";import{useDispatch}from\"react-redux\";import{changeFilmType}from\"../../../Slice/filmTypeSlice\";import{useSelector}from\"react-redux\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function FilmDetail(props){var API_Key=process.env.REACT_APP_MOVIE_API;var location=useLocation();var type=useSelector(function(state){return state.filmType;});var dispatch=useDispatch();var id=type===\"tv\"?location.pathname.slice(4):location.pathname.slice(7);var _useState=useState(),_useState2=_slicedToArray(_useState,2),castData=_useState2[0],setCastData=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),filmData=_useState4[0],setFilmData=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),filmRecommend=_useState6[0],setfilmRecommend=_useState6[1];var _useState7=useState(),_useState8=_slicedToArray(_useState7,2),externalIdData=_useState8[0],setExternalIdData=_useState8[1];useEffect(function(){var type=location.pathname.slice(1,3);var action=changeFilmType(type);dispatch(action);},[location.pathname,dispatch]);useEffect(function(){if(!id||!type)return;var fetchCastData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var data,newData,i,_data,_newData,_i;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(type===\"tv\")){_context.next=7;break;}_context.next=3;return tvAPI.getTvCast(API_Key,id);case 3:data=_context.sent;newData=[];for(i=0;i<10;i++){newData.push(data.data.cast[i]);}setCastData(newData);case 7:if(!(type===\"movie\")){_context.next=14;break;}_context.next=10;return movieAPI.getMovieCast(API_Key,id);case 10:_data=_context.sent;_newData=[];for(_i=0;_i<10;_i++){_newData.push(_data.data.cast[_i]);}setCastData(_newData);case 14:case\"end\":return _context.stop();}}},_callee);}));return function fetchCastData(){return _ref.apply(this,arguments);};}();fetchCastData();},[id,type,API_Key]);useEffect(function(){if(!id||!type)return;var fetchFilmExternalId=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var data,_data2;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!(type===\"tv\")){_context2.next=5;break;}_context2.next=3;return tvAPI.getTvExternalId(API_Key,id);case 3:data=_context2.sent;setExternalIdData(data.data);case 5:if(!(type===\"movie\")){_context2.next=10;break;}_context2.next=8;return movieAPI.getMovieExternalId(API_Key,id);case 8:_data2=_context2.sent;setExternalIdData(_data2.data);case 10:case\"end\":return _context2.stop();}}},_callee2);}));return function fetchFilmExternalId(){return _ref2.apply(this,arguments);};}();fetchFilmExternalId();},[id,type,API_Key]);useEffect(function(){if(!id||!type)return;var fetchFilmData=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var data,_data3;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:if(!(type===\"tv\")){_context3.next=5;break;}_context3.next=3;return tvAPI.getTvInfo(API_Key,id);case 3:data=_context3.sent;setFilmData(data.data);case 5:if(!(type===\"movie\")){_context3.next=10;break;}_context3.next=8;return movieAPI.getMovieInfo(API_Key,id);case 8:_data3=_context3.sent;setFilmData(_data3===null||_data3===void 0?void 0:_data3.data);case 10:case\"end\":return _context3.stop();}}},_callee3);}));return function fetchFilmData(){return _ref3.apply(this,arguments);};}();fetchFilmData();},[id,type,API_Key]);useEffect(function(){if(!id||!type)return;var fetchRecommend=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){var data,newData,i,_data4,_newData2,_i2;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:if(!(type===\"tv\")){_context4.next=7;break;}_context4.next=3;return tvAPI.getTvRecommend(API_Key,id);case 3:data=_context4.sent;newData=[];for(i=0;i<10;i++){newData.push(data.data.results[i]);}setfilmRecommend(newData);case 7:if(!(type===\"movie\")){_context4.next=14;break;}_context4.next=10;return movieAPI.getMovieRecommend(API_Key,id);case 10:_data4=_context4.sent;_newData2=[];for(_i2=0;_i2<10;_i2++){_newData2.push(_data4.data.results[_i2]);}setfilmRecommend(_newData2);case 14:case\"end\":return _context4.stop();}}},_callee4);}));return function fetchRecommend(){return _ref4.apply(this,arguments);};}();fetchRecommend();},[id,type,API_Key]);return/*#__PURE__*/_jsxs(\"div\",{className:\"film-detail\",children:[/*#__PURE__*/_jsx(FilmCast,{castData:castData}),/*#__PURE__*/_jsx(FilmFact,{type:type,filmData:filmData,externalIdData:externalIdData}),/*#__PURE__*/_jsx(FilmRecommend,{filmRecommend:filmRecommend})]});}export default FilmDetail;","map":{"version":3,"sources":["/Users/rengarrrrr/Desktop/Studies/movie/src/features/FilmInfo/components/FilmDetail/index.jsx"],"names":["React","useEffect","FilmCast","FilmFact","useLocation","useState","tvAPI","movieAPI","FilmRecommend","useDispatch","changeFilmType","useSelector","FilmDetail","props","API_Key","process","env","REACT_APP_MOVIE_API","location","type","state","filmType","dispatch","id","pathname","slice","castData","setCastData","filmData","setFilmData","filmRecommend","setfilmRecommend","externalIdData","setExternalIdData","action","fetchCastData","getTvCast","data","newData","i","push","cast","getMovieCast","fetchFilmExternalId","getTvExternalId","getMovieExternalId","fetchFilmData","getTvInfo","getMovieInfo","fetchRecommend","getTvRecommend","results","getMovieRecommend"],"mappings":"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","sourcesContent":["import React, { useEffect } from \"react\";\nimport PropTypes from \"prop-types\";\nimport \"./styles.scss\";\nimport FilmCast from \"../FilmCast\";\nimport FilmFact from \"../FilmFact\";\nimport { useLocation } from \"react-router-dom\";\nimport { useState } from \"react\";\nimport tvAPI from \"../../../../api/tvAPI\";\nimport movieAPI from \"../../../../api/movieAPI\";\nimport FilmRecommend from \"../FilmRecommend\";\nimport { useDispatch } from \"react-redux\";\nimport { changeFilmType } from \"../../../Slice/filmTypeSlice\";\nimport { useSelector } from \"react-redux\";\n\nFilmDetail.propTypes = {};\n\nfunction FilmDetail(props) {\n  const API_Key = process.env.REACT_APP_MOVIE_API;\n  const location = useLocation();\n\n  const type = useSelector((state) => state.filmType);\n\n  const dispatch = useDispatch();\n\n  const id =\n    type === \"tv\" ? location.pathname.slice(4) : location.pathname.slice(7);\n\n  const [castData, setCastData] = useState();\n\n  const [filmData, setFilmData] = useState();\n\n  const [filmRecommend, setfilmRecommend] = useState();\n\n  const [externalIdData, setExternalIdData] = useState();\n\n  useEffect(() => {\n    const type = location.pathname.slice(1, 3);\n    const action = changeFilmType(type);\n    dispatch(action);\n  }, [location.pathname, dispatch]);\n\n  useEffect(() => {\n    if (!id || !type) return;\n    const fetchCastData = async () => {\n      if (type === \"tv\") {\n        const data = await tvAPI.getTvCast(API_Key, id);\n        const newData = [];\n        for (let i = 0; i < 10; i++) {\n          newData.push(data.data.cast[i]);\n        }\n        setCastData(newData);\n      }\n      if (type === \"movie\") {\n        const data = await movieAPI.getMovieCast(API_Key, id);\n        const newData = [];\n        for (let i = 0; i < 10; i++) {\n          newData.push(data.data.cast[i]);\n        }\n        setCastData(newData);\n      }\n    };\n    fetchCastData();\n  }, [id, type, API_Key]);\n\n  useEffect(() => {\n    if (!id || !type) return;\n    const fetchFilmExternalId = async () => {\n      if (type === \"tv\") {\n        const data = await tvAPI.getTvExternalId(API_Key, id);\n        setExternalIdData(data.data);\n      }\n      if (type === \"movie\") {\n        const data = await movieAPI.getMovieExternalId(API_Key, id);\n        setExternalIdData(data.data);\n      }\n    };\n    fetchFilmExternalId();\n  }, [id, type, API_Key]);\n\n  useEffect(() => {\n    if (!id || !type) return;\n    const fetchFilmData = async () => {\n      if (type === \"tv\") {\n        const data = await tvAPI.getTvInfo(API_Key, id);\n        setFilmData(data.data);\n      }\n      if (type === \"movie\") {\n        const data = await movieAPI.getMovieInfo(API_Key, id);\n        setFilmData(data?.data);\n      }\n    };\n    fetchFilmData();\n  }, [id, type, API_Key]);\n\n  useEffect(() => {\n    if (!id || !type) return;\n    const fetchRecommend = async () => {\n      if (type === \"tv\") {\n        const data = await tvAPI.getTvRecommend(API_Key, id);\n        let newData = [];\n        for (let i = 0; i < 10; i++) {\n          newData.push(data.data.results[i]);\n        }\n        setfilmRecommend(newData);\n      }\n      if (type === \"movie\") {\n        const data = await movieAPI.getMovieRecommend(API_Key, id);\n        let newData = [];\n        for (let i = 0; i < 10; i++) {\n          newData.push(data.data.results[i]);\n        }\n\n        setfilmRecommend(newData);\n      }\n    };\n    fetchRecommend();\n  }, [id, type, API_Key]);\n\n  return (\n    <div className=\"film-detail\">\n      <FilmCast castData={castData} />\n      <FilmFact\n        type={type}\n        filmData={filmData}\n        externalIdData={externalIdData}\n      />\n      <FilmRecommend filmRecommend={filmRecommend} />\n    </div>\n  );\n}\n\nexport default FilmDetail;\n"]},"metadata":{},"sourceType":"module"}