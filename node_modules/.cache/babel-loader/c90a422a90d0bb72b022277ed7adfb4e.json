{"ast":null,"code":"import _asyncToGenerator from\"/Users/rengarrrrr/Desktop/Studies/movie/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/rengarrrrr/Desktop/Studies/movie/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/Users/rengarrrrr/Desktop/Studies/movie/node_modules/@babel/runtime/regenerator/index.js\";import React,{useEffect}from\"react\";import SlideButton from\"../../../../components/SlideButton\";import\"./styles.scss\";import AOS from\"aos\";import\"aos/dist/aos.css\";import MovieTag from\"../../../../components/MovieTag\";import{useState}from\"react\";import movieAPI from\"../../../../api/movieAPI\";import tvAPI from\"../../../../api/tvAPI\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function PopularHome(props){var API_Key=process.env.REACT_APP_MOVIE_API;var _useState=useState(\"option1\"),_useState2=_slicedToArray(_useState,2),popularType=_useState2[0],setPopularType=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),popularData=_useState4[0],setPopularData=_useState4[1];var _useState5=useState(true),_useState6=_slicedToArray(_useState5,2),isLoading=_useState6[0],setIsLoading=_useState6[1];var handlePopular=function handlePopular(e){var type=e.target.attributes.value.value;setIsLoading(true);if(type!==popularType)setPopularType(type);// check if type !== current popularType => change type\n};var renderPopularData=function renderPopularData(){if(!popularData)return;return popularData.map(function(item,idx){var name=\"\";if(popularType===\"option1\")name=item===null||item===void 0?void 0:item.name;if(popularType===\"option2\")name=item===null||item===void 0?void 0:item.original_title;return/*#__PURE__*/_jsx(MovieTag,{name:name,img:item===null||item===void 0?void 0:item.poster_path,vote:item===null||item===void 0?void 0:item.vote_average,type:popularType===\"option1\"?\"tv\":\"movie\",id:item.id},idx);});};useEffect(function(){AOS.init({duration:1000,once:true});},[isLoading]);useEffect(function(){var fetchPopularData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var data,setData,i,_data,_setData,_i;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setIsLoading(true);if(!(popularType===\"option2\")){_context.next=9;break;}_context.next=4;return movieAPI.getPopularHome(API_Key);case 4:data=_context.sent;setData=[];for(i=0;i<10;i++){setData.push(data.data.results[i]);}setPopularData(setData);setIsLoading(false);case 9:if(!(popularType===\"option1\")){_context.next=17;break;}_context.next=12;return tvAPI.getPopularHome(API_Key);case 12:_data=_context.sent;_setData=[];for(_i=0;_i<10;_i++){_setData.push(_data.data.results[_i]);}setPopularData(_setData);setIsLoading(false);case 17:case\"end\":return _context.stop();}}},_callee);}));return function fetchPopularData(){return _ref.apply(this,arguments);};}();fetchPopularData();},[API_Key,popularType]);return/*#__PURE__*/_jsxs(\"section\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"popular-title\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"What's Popular ?\"}),/*#__PURE__*/_jsx(SlideButton,{option1:\"On TV\",option2:\"Theaters\",handleOption:handlePopular,optionType:popularType})]}),!isLoading?/*#__PURE__*/_jsx(\"div\",{\"data-aos\":\"zoom-in\",className:\"popular-content\",children:renderPopularData()}):null]});}export default PopularHome;","map":{"version":3,"sources":["/Users/rengarrrrr/Desktop/Studies/movie/src/features/Home/components/PopularHome/index.jsx"],"names":["React","useEffect","SlideButton","AOS","MovieTag","useState","movieAPI","tvAPI","PopularHome","props","API_Key","process","env","REACT_APP_MOVIE_API","popularType","setPopularType","popularData","setPopularData","isLoading","setIsLoading","handlePopular","e","type","target","attributes","value","renderPopularData","map","item","idx","name","original_title","poster_path","vote_average","id","init","duration","once","fetchPopularData","getPopularHome","data","setData","i","push","results"],"mappings":"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","sourcesContent":["import React, { useEffect } from \"react\";\nimport PropTypes from \"prop-types\";\nimport SlideButton from \"../../../../components/SlideButton\";\nimport \"./styles.scss\";\nimport AOS from \"aos\";\nimport \"aos/dist/aos.css\";\nimport MovieTag from \"../../../../components/MovieTag\";\nimport { useState } from \"react\";\nimport movieAPI from \"../../../../api/movieAPI\";\nimport tvAPI from \"../../../../api/tvAPI\";\n\nPopularHome.propTypes = {};\n\nfunction PopularHome(props) {\n  const API_Key = process.env.REACT_APP_MOVIE_API;\n\n  const [popularType, setPopularType] = useState(\"option1\");\n  const [popularData, setPopularData] = useState();\n  const [isLoading, setIsLoading] = useState(true);\n\n  const handlePopular = (e) => {\n    const type = e.target.attributes.value.value;\n    setIsLoading(true)\n    if (type !== popularType) setPopularType(type); // check if type !== current popularType => change type\n  };\n\n  const renderPopularData = () => {\n    if (!popularData) return;\n    return popularData.map((item, idx) => {\n      let name = \"\";\n      if (popularType === \"option1\") name = item?.name;\n      if (popularType === \"option2\") name = item?.original_title;\n      return (\n        <MovieTag\n          key={idx}\n          name={name}\n          img={item?.poster_path}\n          vote={item?.vote_average}\n          type={popularType === \"option1\" ? \"tv\" : \"movie\"}\n          id={item.id}\n        />\n      );\n    });\n  };\n\n  useEffect(() => {\n    AOS.init({\n      duration: 1000,\n      once: true,\n    });\n  }, [isLoading]);\n\n  useEffect(() => {\n    const fetchPopularData = async () => {\n      setIsLoading(true);\n      if (popularType === \"option2\") {\n        const data = await movieAPI.getPopularHome(API_Key);\n        const setData = [];\n        for (let i = 0; i < 10; i++) {\n          setData.push(data.data.results[i]);\n        }\n        setPopularData(setData);\n        setIsLoading(false);\n      }\n      if (popularType === \"option1\") {\n        const data = await tvAPI.getPopularHome(API_Key);\n        const setData = [];\n        for (let i = 0; i < 10; i++) {\n          setData.push(data.data.results[i]);\n        }\n        setPopularData(setData);\n        setIsLoading(false);\n      }\n    };\n    fetchPopularData();\n  }, [API_Key, popularType]);\n\n  return (\n    <section>\n      <div className=\"popular-title\">\n        <h2>What's Popular ?</h2>\n        <SlideButton\n          option1=\"On TV\"\n          option2=\"Theaters\"\n          handleOption={handlePopular}\n          optionType={popularType}\n        />\n      </div>\n      {!isLoading ? (\n        <div data-aos=\"zoom-in\" className=\"popular-content\">\n          {renderPopularData()}\n        </div>\n      ) :null}\n    </section>\n  );\n}\n\nexport default PopularHome;\n"]},"metadata":{},"sourceType":"module"}